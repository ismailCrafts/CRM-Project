{% extends 'base.html' %}

{% block content %}
<div class="container py-4" style="max-width: 480px;">
  <!-- Page title -->
  <h3 class="mb-3 text-center">Update Customer Record</h3>

  <!-- Display Django messages if any -->
  {% if messages %}
    <ul>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <!-- Update form with multipart encoding for file uploads -->
  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Input fields pre-filled with existing customer data -->
    <div class="mb-2">
      <label for="first_name" class="form-label small">First Name</label>
      <input type="text" class="form-control form-control-sm" id="first_name" name="first_name" value="{{ customer.first_name }}" required>
    </div>

    <div class="mb-2">
      <label for="last_name" class="form-label small">Last Name</label>
      <input type="text" class="form-control form-control-sm" id="last_name" name="last_name" value="{{ customer.last_name }}" required>
    </div>

    <div class="mb-2">
      <label for="email" class="form-label small">Email</label>
      <input type="email" class="form-control form-control-sm" id="email" name="email" value="{{ customer.email }}" required>
    </div>

    <div class="mb-2">
      <label for="phone" class="form-label small">Phone</label>
      <input type="text" class="form-control form-control-sm" id="phone" name="phone" value="{{ customer.phone }}">
    </div>

    <div class="mb-2">
      <label for="address" class="form-label small">Address</label>
      <input type="text" class="form-control form-control-sm" id="address" name="address" value="{{ customer.address }}">
    </div>

    <div class="mb-2">
      <label for="city" class="form-label small">City</label>
      <input type="text" class="form-control form-control-sm" id="city" name="city" value="{{ customer.city }}">
    </div>

    <div class="mb-2">
      <label for="customer_info" class="form-label small">About Customer</label>
      <textarea class="form-control form-control-sm" id="customer_info" name="customer_info" rows="2">{{ customer.customer_info }}</textarea>
    </div>

    <!-- File input for profile image -->
    <div class="mb-3">
      <label for="image" class="form-label small">Profile Image</label>
      <input type="file" class="form-control form-control-sm" id="image" name="image" accept="image/*">
    </div>

    <!-- Display existing profile image if available -->
    {% if customer.image %}
      <div class="mb-3 text-center">
        <img src="{{ customer.image.url }}" alt="Profile Image" class="img-thumbnail" width="120" />
      </div>
    {% endif %}

    <!-- Submit button -->
    <button type="submit" class="btn btn-primary btn-sm w-100">Update Record</button>
  </form>
</div>
{% endblock %}
